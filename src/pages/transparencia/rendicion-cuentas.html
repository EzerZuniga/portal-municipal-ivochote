<!DOCTYPE html>
<html lang="es-PE">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rendición de Cuentas - Municipalidad de Ivochote</title>
    <link rel="stylesheet" href="/assets/css/output.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.css">
</head>
<body class="font-sans antialiased text-gray-800 bg-gray-50">
    <!-- Header Component -->
    <div id="header-container"></div>

    <!-- Main Content -->
    <main class="py-12">
        <div class="container px-6 mx-auto">
            <!-- Breadcrumbs -->
            <nav class="flex mb-6" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 md:space-x-3">
                    <li class="inline-flex items-center">
                        <a href="/" class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600">
                            <i class="fas fa-home mr-2"></i>
                            Inicio
                        </a>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fas fa-chevron-right text-gray-400"></i>
                            <a href="/transparencia/" class="ml-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ml-2">Transparencia</a>
                        </div>
                    </li>
                    <li aria-current="page">
                        <div class="flex items-center">
                            <i class="fas fa-chevron-right text-gray-400"></i>
                            <span class="ml-1 text-sm font-medium text-gray-500 md:ml-2">Rendición de Cuentas</span>
                        </div>
                    </li>
                </ol>
            </nav>

            <!-- Header Section -->
            <div class="mb-8">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">Rendición de Cuentas</h1>
                <p class="text-lg text-gray-600">Información financiera y de gestión de la Municipalidad de Ivochote</p>
            </div>

            <!-- Año Seleccionado -->
            <div class="flex items-center justify-between mb-8 bg-white p-4 rounded-lg shadow">
                <div>
                    <h2 class="text-xl font-semibold text-gray-800">Información del Ejercicio Fiscal</h2>
                    <p class="text-gray-600">Selecciona el año que deseas consultar</p>
                </div>
                <select id="select-year" class="border border-gray-300 rounded-lg px-4 py-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="2025">2025</option>
                    <option value="2024">2024</option>
                    <option value="2023">2023</option>
                </select>
            </div>

            <!-- Estadísticas Financieras -->
            <section class="mb-12">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Estadísticas Financieras</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow text-center">
                        <div class="text-3xl font-bold text-blue-600 mb-2">S/ 2,850,000</div>
                        <div class="text-gray-700">Presupuesto Anual</div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow text-center">
                        <div class="text-3xl font-bold text-green-600 mb-2">S/ 1,920,000</div>
                        <div class="text-gray-700">Ejecutado a la fecha</div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow text-center">
                        <div class="text-3xl font-bold text-purple-600 mb-2">67%</div>
                        <div class="text-gray-700">Porcentaje de ejecución</div>
                    </div>
                </div>

                <!-- Gráficos -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Distribución del Presupuesto</h3>
                        <canvas id="presupuesto-chart" height="300"></canvas>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Ejecución por Rubro</h3>
                        <canvas id="ejecucion-chart" height="300"></canvas>
                    </div>
                </div>
            </section>

            <!-- Informes -->
            <section class="mb-12">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Informes de Gestión</h2>
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipo</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Periodo</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha de Publicación</th>
                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Descargar</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="font-medium text-gray-900">Informe Trimestral</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="text-gray-900">Abril - Junio 2025</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-gray-500">05/07/2025</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <a href="#" class="text-blue-600 hover:text-blue-900 mr-3"><i class="fas fa-file-pdf mr-1"></i> PDF</a>
                                        <a href="#" class="text-gray-600 hover:text-gray-900"><i class="fas fa-file-excel mr-1"></i> Excel</a>
                                    </td>
                                </tr>
                                <!-- Más informes -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Proyectos Ejecutados -->
            <section>
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Proyectos Ejecutados</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
                        <div class="relative h-48 overflow-hidden">
                            <img src="/assets/img/proyectos/proyecto-1.jpg" alt="Proyecto 1" class="w-full h-full object-cover">
                            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4">
                                <span class="inline-block px-2 py-1 text-xs font-semibold text-white bg-green-600 rounded-full">Finalizado</span>
                            </div>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-semibold text-gray-800 mb-2">Mejoramiento de Vías Urbanas</h3>
                            <p class="text-gray-600 mb-4">Asfaltado de 2 km de vías principales en el centro poblado.</p>
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-medium text-gray-700">S/ 450,000</span>
                                <a href="#" class="text-blue-600 hover:text-blue-800 text-sm font-medium">Ver detalles</a>
                            </div>
                        </div>
                    </div>
                    <!-- Más proyectos -->
                </div>
            </section>
        </div>
    </main>

    <!-- Footer Component -->
    <div id="footer-container"></div>

    <!-- Scripts -->
    <script src="/assets/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Inicializar gráficos
    initCharts();
    
    // Manejar cambio de año
    const yearSelect = document.getElementById('select-year');
    if (yearSelect) {
        yearSelect.addEventListener('change', function() {
            // En una app real, actualizaría los datos de los gráficos
            updateCharts(this.value);
        });
    }
});

function initCharts() {
    // Gráfico de distribución del presupuesto
    const presupuestoCtx = document.getElementById('presupuesto-chart').getContext('2d');
    const presupuestoChart = new Chart(presupuestoCtx, {
        type: 'doughnut',
        data: {
            labels: ['Obras Públicas', 'Servicios Municipales', 'Salud y Educación', 'Administración', 'Otros'],
            datasets: [{
                data: [35, 25, 20, 15, 5],
                backgroundColor: [
                    '#3B82F6', // blue-500
                    '#10B981', // green-500
                    '#F59E0B', // yellow-500
                    '#8B5CF6', // purple-500
                    '#EC4899'  // pink-500
                ],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'right',
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            const label = context.label || '';
                            const value = context.raw || 0;
                            return `${label}: ${value}%`;
                        }
                    }
                }
            }
        }
    });
    
    // Gráfico de ejecución por rubro
    const ejecucionCtx = document.getElementById('ejecucion-chart').getContext('2d');
    const ejecucionChart = new Chart(ejecucionCtx, {
        type: 'bar',
        data: {
            labels: ['Obras Públicas', 'Servicios Municipales', 'Salud y Educación', 'Administración'],
            datasets: [
                {
                    label: 'Presupuestado',
                    data: [850000, 600000, 500000, 400000],
                    backgroundColor: '#E5E7EB', // gray-200
                    borderColor: '#E5E7EB',
                    borderWidth: 1
                },
                {
                    label: 'Ejecutado',
                    data: [620000, 450000, 380000, 250000],
                    backgroundColor: '#10B981', // green-500
                    borderColor: '#10B981',
                    borderWidth: 1
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                x: {
                    stacked: false,
                },
                y: {
                    stacked: false,
                    beginAtZero: true,
                    ticks: {
                        callback: function(value) {
                            return 'S/ ' + (value / 1000).toFixed(0) + 'K';
                        }
                    }
                }
            },
            plugins: {
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            const label = context.dataset.label || '';
                            const value = context.raw || 0;
                            return `${label}: S/ ${value.toLocaleString('es-PE')}`;
                        }
                    }
                }
            }
        }
    });
    
    // Guardar referencias a los gráficos para actualizarlos luego
    window.charts = {
        presupuesto: presupuestoChart,
        ejecucion: ejecucionChart
    };
}

function updateCharts(year) {
    // Datos simulados para diferentes años
    const datos = {
        '2025': {
            presupuesto: [35, 25, 20, 15, 5],
            ejecucion: {
                presupuestado: [850000, 600000, 500000, 400000],
                ejecutado: [620000, 450000, 380000, 250000]
            }
        },
        '2024': {
            presupuesto: [40, 20, 15, 20, 5],
            ejecucion: {
                presupuestado: [750000, 500000, 400000, 350000],
                ejecutado: [700000, 480000, 390000, 340000]
            }
        },
        '2023': {
            presupuesto: [30, 30, 15, 20, 5],
            ejecucion: {
                presupuestado: [700000, 550000, 350000, 400000],
                ejecutado: [650000, 500000, 300000, 380000]
            }
        }
    };
    
    const yearData = datos[year] || datos['2025'];
    
    // Actualizar gráfico de presupuesto
    window.charts.presupuesto.data.datasets[0].data = yearData.presupuesto;
    window.charts.presupuesto.update();
    
    // Actualizar gráfico de ejecución
    window.charts.ejecucion.data.datasets[0].data = yearData.ejecucion.presupuestado;
    window.charts.ejecucion.data.datasets[1].data = yearData.ejecucion.ejecutado;
    window.charts.ejecucion.update();
    
    // Mostrar notificación
    mostrarNotificacion(`Datos actualizados para el año ${year}`, 'info');
}

function mostrarNotificacion(mensaje, tipo = 'info') {
    const notificacion = document.createElement('div');
    notificacion.className = `fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg text-white font-medium ${
        tipo === 'info' ? 'bg-blue-500' : 
        tipo === 'success' ? 'bg-green-500' : 
        'bg-red-500'
    }`;
    notificacion.textContent = mensaje;
    document.body.appendChild(notificacion);
    
    setTimeout(() => {
        notificacion.classList.add('opacity-0', 'transition-opacity', 'duration-300');
        setTimeout(() => {
            notificacion.remove();
        }, 300);
    }, 3000);
}
    </script>
</body>
</html>